================================================================================
机器人控制系统错误日志
启动时间: 2026-01-16 16:00:57
================================================================================

[2026-01-16 16:00:57] [INFO] 系统: 机器人控制系统启动
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] 存储管理器: 所有存储状态已重置为默认值
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] 存储管理器: 存储状态已保存到: storage_state.json
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] 存储管理器: 存储状态已重置并保存
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] 系统: 暂存区状态已重置
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] 系统: 启动HTTP服务器模式
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] HTTP服务器: 命令回调函数已设置
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] 状态机: 任务状态机已初始化
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] 命令处理器: 命令处理器初始化完成，管理 0 台机器人
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] HTTP服务器: HTTP服务器启动成功: 0.0.0.0:8090
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] HTTP服务器: 开始监听HTTP请求...
--------------------------------------------------------------------------------
[2026-01-16 16:00:57] [INFO] 系统: 程序进入休眠状态，等待START_WORKING命令
--------------------------------------------------------------------------------
[2026-01-16 16:01:04] [INFO] HTTP服务器: 收到命令: START_WORKING (ID: 1768550465696)
--------------------------------------------------------------------------------
[2026-01-16 16:01:04] [INFO] 命令处理器: 收到命令: START_WORKING (ID: 1768550465696)
--------------------------------------------------------------------------------
[2026-01-16 16:01:04] [INFO] 命令处理器: 收到START_WORKING命令，程序激活
--------------------------------------------------------------------------------
[2026-01-16 16:01:04] [INFO] HTTP服务器: 命令执行完成: True
--------------------------------------------------------------------------------
[2026-01-16 16:01:04] [INFO] HTTP服务器: HTTP请求: "POST / HTTP/1.1" 200 -
--------------------------------------------------------------------------------
[2026-01-16 16:01:04] [INFO] 系统: 已接收START_WORKING命令，开始连接机器人
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] 配置加载: ✓ 已加载外部配置文件: ./robot_config.json
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] Robot B: 连接成功 - 0.0.0.0:9091
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] 系统: robot_b 连接成功
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] 命令处理器: 命令处理器初始化完成，管理 1 台机器人
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] 系统: 命令处理器已重新初始化
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] 电池监控: 添加机器人 robot_b 到监控列表
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] 电池监控: 电池监控器已启动
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] 电池监控: 开始监控循环
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [INFO] 电池监控: robot_b 已订阅电池状态topic
--------------------------------------------------------------------------------
[2026-01-16 16:01:05] [WARNING] 电池监控: robot_b 无法获取电池状态
--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [INFO] HTTP服务器: 收到命令: REFILL_EMPTY_BOTTLES (ID: REFILL_EMPTY_BOTTLES_001)
--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [INFO] 命令处理器: 收到命令: REFILL_EMPTY_BOTTLES (ID: REFILL_EMPTY_BOTTLES_001)
--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [INFO] 命令处理器: REFILL_EMPTY_BOTTLES - robot_id: robot_b
--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [INFO] 状态机: 任务开始: REFILL_EMPTY_BOTTLES_001, 机器人: robot_b
--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [INFO] HTTP服务器: 命令执行完成: True
--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [INFO] 命令处理器: 任务 REFILL_EMPTY_BOTTLES_001 开始执行 (机器人: robot_b)
--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [INFO] HTTP服务器: HTTP请求: "POST / HTTP/1.1" 200 -
--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [ERROR] 命令处理器: 操作异常 - 任务 REFILL_EMPTY_BOTTLES_001 执行异常
异常详情:
Traceback (most recent call last):
  File "/home/zhangziwei/Code/robot_connect/cmd_handler.py", line 1385, in _execute_refill_empty_bottles_async
    extra
NameError: name 'extra' is not defined

--------------------------------------------------------------------------------
[2026-01-16 16:01:09] [ERROR] 状态机: 任务错误: 执行异常: name 'extra' is not defined
--------------------------------------------------------------------------------
[2026-01-16 16:01:33] [INFO] HTTP服务器: 收到命令: GET_TASK_STATE (ID: 1768550494536)
--------------------------------------------------------------------------------
[2026-01-16 16:01:33] [INFO] HTTP服务器: HTTP请求: "POST / HTTP/1.1" 200 -
--------------------------------------------------------------------------------
[2026-01-16 16:02:14] [INFO] HTTP服务器: 收到命令: SCAN_QRCODE_ENTER_ID (ID: SCAN_QRCODE_ENTER_ID_001)
--------------------------------------------------------------------------------
[2026-01-16 16:02:14] [INFO] 命令处理器: 收到命令: SCAN_QRCODE_ENTER_ID (ID: SCAN_QRCODE_ENTER_ID_001)
--------------------------------------------------------------------------------
[2026-01-16 16:02:14] [INFO] 命令处理器: SCAN_QRCODE_ENTER_ID - bottle_id: glass_bottle_250_12345, type: glass_bottle_250, task: split_liquid
--------------------------------------------------------------------------------
[2026-01-16 16:02:14] [INFO] 命令处理器: 瓶子ID已录入并触发事件: glass_bottle_250_12345
--------------------------------------------------------------------------------
[2026-01-16 16:02:14] [INFO] HTTP服务器: 命令执行完成: True
--------------------------------------------------------------------------------
[2026-01-16 16:02:14] [INFO] HTTP服务器: HTTP请求: "POST / HTTP/1.1" 200 -
--------------------------------------------------------------------------------
[2026-01-16 16:02:30] [INFO] HTTP服务器: 收到命令: PICK_FROM_BOTTLE_OPENER_250 (ID: PICK_FROM_BOTTLE_OPENER_250_001)
--------------------------------------------------------------------------------
[2026-01-16 16:02:30] [INFO] 命令处理器: 收到命令: PICK_FROM_BOTTLE_OPENER_250 (ID: PICK_FROM_BOTTLE_OPENER_250_001)
--------------------------------------------------------------------------------
[2026-01-16 16:02:30] [INFO] 命令处理器: PICK_FROM_BOTTLE_OPENER_250 - success: True
--------------------------------------------------------------------------------
[2026-01-16 16:02:30] [INFO] HTTP服务器: 命令执行完成: True
--------------------------------------------------------------------------------
[2026-01-16 16:02:30] [INFO] HTTP服务器: HTTP请求: "POST / HTTP/1.1" 200 -
--------------------------------------------------------------------------------
[2026-01-16 16:02:44] [INFO] HTTP服务器: 收到命令: PICK_FROM_BOTTLE_OPENER_500 (ID: PICK_FROM_BOTTLE_OPENER_500_001)
--------------------------------------------------------------------------------
[2026-01-16 16:02:44] [INFO] 命令处理器: 收到命令: PICK_FROM_BOTTLE_OPENER_500 (ID: PICK_FROM_BOTTLE_OPENER_500_001)
--------------------------------------------------------------------------------
[2026-01-16 16:02:44] [INFO] 命令处理器: PICK_FROM_BOTTLE_OPENER_500 - success: True
--------------------------------------------------------------------------------
[2026-01-16 16:02:44] [INFO] HTTP服务器: 命令执行完成: True
--------------------------------------------------------------------------------
[2026-01-16 16:02:44] [INFO] HTTP服务器: HTTP请求: "POST / HTTP/1.1" 200 -
--------------------------------------------------------------------------------
[2026-01-16 16:02:51] [INFO] 电池监控: 监控循环已结束
--------------------------------------------------------------------------------
[2026-01-16 16:02:51] [INFO] 电池监控: 电池监控器已停止
--------------------------------------------------------------------------------
[2026-01-16 16:02:51] [INFO] HTTP服务器: 正在停止HTTP服务器...
--------------------------------------------------------------------------------
[2026-01-16 16:02:51] [WARNING] 系统: 用户中断程序 (Ctrl+C)
--------------------------------------------------------------------------------
[2026-01-16 16:02:51] [INFO] 系统: 开始清理资源
--------------------------------------------------------------------------------
[2026-01-16 16:02:51] [INFO] 系统: 暂存区状态已保存
--------------------------------------------------------------------------------
[2026-01-16 16:02:51] [INFO] 系统: 机器人控制系统已停止
--------------------------------------------------------------------------------
